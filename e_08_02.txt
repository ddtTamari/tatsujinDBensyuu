実施テキスト：達人に学ぶDB設計徹底指南書

実施者：玉利仁美
実施日：1月17日

[演習8－2] 一時テーブル

[演習内容]
 8-4節で紹介したようなアドホックなデータ、つまり一時的にしか使わず、処理が終わればなくなってかまわないようなデータを用意する手段として、DBMSは「一時テーブル」という機能を用意しています。この機能について調べ、使うことの是非を考えてください。

回答

一時テーブルは、"#"でローカル一時テーブル、"##"でグローバル一時テーブルを作成することができます。
一時テーブルはその名の通り、一時的に作成し、使い終わったら削除されるテーブルのことです。
ローカル一時テーブルは作成した人のみ使用することができるテーブルのことで、作成者がセッションを終了させると一時テーブルは削除されます。
グローバル一時テーブルは、作成者以外にもすべてのユーザが使用することができ、すべてのユーザーがセッションを終了させるときに一時テーブルが削除されます。
一時テーブルのメリットは、作成したテーブルが処理が必要なくなった際に自動的に削除されることと、ローカル・グローバルと分けることでそのテーブルを参照できる範囲を決めることができる点です。

上記調べた結果、私は一時テーブルを積極的に使用するべきだと思います。
理由としては、元のテーブルのデータを変更したり、新たにテーブルを作成するより容量を圧迫せずに済み、また一時的に使いたいだけなので、使い終わったら削除されるという点においても先述(テーブルのデータの変更など)の方法より良いものだと思います。
ローカルで作ることでほかの利用者に気にせず利用することができ、共有したい一時テーブルはグローバルで作ることによって利用することができるのでその点も一時テーブルを使うことを推奨する理由になります。
(1月31日追加)：一時テーブルを使わずに一回一回SQLで呼び出すとその分処理が必要になり、全体の処理速度に支障が出るのも一時テーブルを利用する理由です。
気を付けなければならない点としては、一時テーブルは自動的に削除されてしまうので、もし仮にそのテーブルを残しておきたいとなったときは処理が必要になってくること、セッションを終了させてしまうとまた作り直さなければならないことがあります。
以上気を付けていれば、一時テーブルを効率的に利用することができると思うので積極的に利用したほうがいいと思います。

参考資料：

