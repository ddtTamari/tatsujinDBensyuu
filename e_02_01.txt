実施テキスト：達人に学ぶDB設計徹底指南書

実施者：玉利仁美
実施日：11月1日

[演習2－1] データベースサーバーのクラスタリング構成

[演習内容]
 データベースの信頼性と性能を高めるための物理設計として、本章ではRAIDについて学びました。
このほかにも、システム全体としての信頼性と性能を向上させる方法として「クラスタリング」という構成が存在します。
一般的に、サーバーのクラスタリング構成にはどのような形態がありうるか、調べてください。

回答

サーバのクラスタリングとは、限りなくサーバーを停止させずに稼働させ続けることが目的の構成。
二つのタイプがあり、稼働率によってFault ToleranceとHigh Availabilityに分けられる(表①)。
クラスタリングは、多くのサーバーを集合させて一つのサーバーに見せかけることで実現させているもので、
一つのサーバーがダウンしたとしても複数台あるサーバーのどれかが稼働していれば、サービスを提供させ続けることができる(図①)。

サーバクラスタ構成にはクラスタ・モデルとフェイルオーバー・ポリシーの二つの考慮すべきことがある。

1つ目はクラスタ・モデル
アクティブ‐アクティブ構成とアクティブ‐パッシブ構成の二つがある。
・アクティブ‐アクティブ構成
複数のサーバを同時に稼働している構成で、同時に共有ディスクに書き込みができるが、
そのためにアクティブ‐パッシブ構成より高価になりやすい。複数のサーバが同時に稼働しているため負荷を分散することができパフォーマンスも期待できるが、
その反面、稼働率を考慮した設計ができていないと、仮にサーバが落ちた時一つのサーバに負荷がかかり稼働率が100％を超えるとサービスの提供ができなくなってしまう。
・アクティブ‐パッシブ構成
１つのサーバが稼働し、ほかのサーバは待機している状態になっている。稼働している一つのサーバがサービスを提供し、稼働していたサーバに障害が発生した場合に、
待機しているサーバが障害が発生したサーバに代わって稼働を行う。アクティブ‐アクティブ構成より非常に安価である。
その反面、サーバの切り替え時にタイムラグが発生してしまうためその間サービスが停止してしまうことがあることと、何の対策も行っていないと待機中の高機能のサーバを、
待機させてしまうだけということになってしまう。

２つ目はフェイルオーバー・ポリシー
アプリケーションに障害が発生した時の切り替えの規則。アクティブ‐パッシブ構成の際に主に考慮される。障害発生時に単一サーバに負荷が偏らないよう、分散が予測できるよう
切り替え先を複数あるサーバに振り分ける設定を行うこと。



参考資料：
・ Windowsクラスタリング入門：第1回　MSCS導入の準備～サーバ・クラスタの基礎知識～ (1/5)
 《http://www.atmarkit.co.jp/ait/articles/0812/03/news138.html》
 ・fault toleranceとは
 《http://www.weblio.jp/content/fault+tolerance》
 
 
